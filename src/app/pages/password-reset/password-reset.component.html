<section
  class="password-reset"
  (window:resize)="onResize($event)">
  <div
    class="user-in-account"
    *ngIf="authService.getAuthData()">
    <div class="category-header">
      <div class="category-detail">
        <button
          class="back"
          (click)="backRoute()">
          <svg viewBox="0 0 9 24" xmlns="http://www.w3.org/2000/svg" class="back__icon">
            <path fill-rule="evenodd" clip-rule="evenodd" d="M7.83442 23.8537C8.42181 23.5354 8.63997 22.8012 8.32168 22.2138L2.59664 11.6483L8.30426 1.81724C8.6397 1.23947 8.44324 0.499163 7.86547 0.163727C7.2877 -0.171709 6.5474 0.024744 6.21196 0.602516L0.163582 11.0205C-0.0480747 11.3851 -0.0546751 11.8336 0.146161 12.2042L6.19454 23.3664C6.51283 23.9538 7.24703 24.172 7.83442 23.8537Z" />
          </svg>
        </button>
        <div class="category-detail__icon">
          <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" class="category-detail__image">
            <path d="M12.1764 4.92949C12.5826 4.92949 12.9693 5.01152 13.3365 5.17559C13.7037 5.33184 14.0201 5.54668 14.2857 5.82012C14.5592 6.08574 14.774 6.40215 14.9303 6.76934C15.0943 7.13652 15.1764 7.52324 15.1764 7.92949V9.42949H16.6764V16.9295H7.67637V9.42949H9.17637V7.92949C9.17637 7.52324 9.25449 7.13652 9.41074 6.76934C9.57481 6.40215 9.78965 6.08574 10.0553 5.82012C10.3287 5.54668 10.6451 5.33184 11.0045 5.17559C11.3717 5.01152 11.7623 4.92949 12.1764 4.92949ZM10.6764 9.42949H13.6764V7.92949C13.6764 7.72637 13.6373 7.53496 13.5592 7.35527C13.4811 7.16777 13.3717 7.00762 13.2311 6.8748C13.0982 6.73418 12.9381 6.6248 12.7506 6.54668C12.5709 6.46855 12.3795 6.42949 12.1764 6.42949C11.9654 6.42949 11.7701 6.46855 11.5904 6.54668C11.4107 6.6248 11.2506 6.73418 11.11 6.8748C10.9771 7.00762 10.8717 7.16387 10.7936 7.34355C10.7154 7.52324 10.6764 7.71855 10.6764 7.92949V9.42949ZM15.1764 10.9295H9.17637V15.4295H15.1764V10.9295Z" />
            <path d="M23.0625 7.32422C23.6875 8.82422 24 10.3828 24 12C24 13.6172 23.6875 15.1758 23.0625 16.6758C22.4531 18.1055 21.5938 19.375 20.4844 20.4844C19.375 21.5938 18.1055 22.4531 16.6758 23.0625C15.1758 23.6875 13.6172 24 12 24C10.6406 24 9.32812 23.7773 8.0625 23.332C6.82812 22.9023 5.69922 22.293 4.67578 21.5039C3.66016 20.7148 2.78906 19.7852 2.0625 18.7148C1.69531 18.1758 1.375 17.6133 1.10156 17.0273C0.835938 16.4414 0.617188 15.832 0.445312 15.1992L1.88672 14.8008C2.19922 15.9336 2.67969 16.9727 3.32812 17.918C3.98438 18.8633 4.75781 19.6758 5.64844 20.3555C6.53906 21.0352 7.52734 21.5625 8.61328 21.9375C9.69922 22.3125 10.8281 22.5 12 22.5C12.9609 22.5 13.8867 22.375 14.7773 22.125C15.6758 21.875 16.5117 21.5234 17.2852 21.0703C18.0664 20.6094 18.7773 20.0586 19.418 19.418C20.0586 18.7773 20.6055 18.0703 21.0586 17.2969C21.5195 16.5156 21.875 15.6797 22.125 14.7891C22.375 13.8984 22.5 12.9688 22.5 12C22.5 11.0391 22.375 10.1133 22.125 9.22266C21.875 8.32422 21.5195 7.48828 21.0586 6.71484C20.6055 5.93359 20.0586 5.22266 19.418 4.58203C18.7773 3.94141 18.0664 3.39453 17.2852 2.94141C16.5117 2.48047 15.6758 2.125 14.7773 1.875C13.8867 1.625 12.9609 1.5 12 1.5C10.9844 1.5 10 1.64453 9.04688 1.93359C8.09375 2.21484 7.20312 2.61719 6.375 3.14062C5.55469 3.66406 4.8125 4.29688 4.14844 5.03906C3.49219 5.77344 2.94922 6.59375 2.51953 7.5H6V9H0V3H1.5V6.21094C1.63281 5.96094 1.77734 5.71875 1.93359 5.48438C2.08984 5.24219 2.25391 5.00781 2.42578 4.78125C3.16016 3.80469 4.01953 2.96094 5.00391 2.25C6.03516 1.51562 7.14062 0.957031 8.32031 0.574219C9.5 0.191406 10.7266 0 12 0C13.6172 0 15.1758 0.3125 16.6758 0.9375C18.1055 1.54688 19.375 2.40625 20.4844 3.51562C21.5938 4.625 22.4531 5.89453 23.0625 7.32422Z" />
          </svg>
        </div>
        <p class="category-detail__label">
          Passwort <br>
          ändern
        </p>
      </div>
    </div>
    <h2 class="user-in-account__title">Passwort ändern</h2>
    <form
      *ngIf="!resetPasswordSuccessful && resetViaPasswordForm"
      [formGroup]="resetViaPasswordForm"
      (ngSubmit)="resetViaPasswordSubmit()">
      <div class="form-item">
        <p class="form-item__label">Altes Passwort</p>
        <div class="form-field">
          <input
            formControlName="password"
            [type]="oldPasswordShow ? 'password' : 'text'"
            (blur)="triggerValidation('password')"
            (input)="hideCredentialsError()"
            placeholder="Altes Passwort"
            class="form-field__input">
          <div class="form-field-type">
            <p
              class="form-field-type__text"
              *ngIf="!resetViaPasswordForm.get('password').value">abc</p>
            <button
              *ngIf="resetViaPasswordForm.get('password').value && (!resetViaPasswordForm.get('password').valid || credentialsNotValid)"
              type="button"
              class="show-pass-button"
              (click)="showPassword('oldPasswordShow')">
              <img
                src="../assets/image/eye.svg"
                alt
                class="show-pass-button__icon">
            </button>
            <svg viewBox="0 0 19 13" xmlns="http://www.w3.org/2000/svg" class="form-field-type__valid" *ngIf="resetViaPasswordForm.get('password').valid && !credentialsNotValid">
              <path d="M6.88819 12.9157C6.67486 12.9157 6.47032 12.8317 6.31979 12.6802L0.235486 6.59545C-0.0784952 6.28239 -0.0784952 5.77309 0.235486 5.45911C0.549928 5.14467 1.05922 5.14559 1.37228 5.45911L6.88819 10.9755L17.6286 0.235486C17.9408 -0.0784952 18.4524 -0.0784952 18.7645 0.235486C19.0785 0.549467 19.0785 1.0583 18.7645 1.37228L7.45658 12.6802C7.3056 12.8317 7.10151 12.9157 6.88819 12.9157Z"/>
            </svg>
          </div>
        </div>
        <div
          class="error-box"
          *ngIf="(resetViaPasswordForm.get('password').touched || resetViaPasswordForm.get('password').dirty) && (resetViaPasswordForm.get('password').invalid || credentialsNotValid) && validationError.password">
          <p
            class="error-box__text"
            *ngIf="resetViaPasswordForm.get('password').hasError('required')">{{ 'local_error.FIELD_REQUIRED' | translate }}</p>
          <p
            class="error-box__text"
            *ngIf="resetViaPasswordForm.value.password && resetViaPasswordForm.get('password').hasError('minlength')">{{ 'local_error.LENGTH_PASS' | translate }}</p>
          <p
            class="error-box__text center"
            *ngIf="credentialsNotValid">
          Bitte gib das richtige Passwort ein
        </p>
        </div>
      </div>
      <div class="line"></div>
      <div class="form-item">
        <p class="form-item__label">Neues Passwort</p>
        <div class="form-field">
          <input
            formControlName="newPassword"
            placeholder="Neues Passwort"
            (blur)="triggerValidation('newPassword')"
            [type]="newPasswordShow ? 'password' : 'text'"
            class="form-field__input">
          <div class="form-field-type">
            <p
              class="form-field-type__text"
              *ngIf="!resetViaPasswordForm.get('newPassword').value">abc</p>
            <button
              *ngIf="resetViaPasswordForm.get('newPassword').value && resetViaPasswordForm.hasError('mismatchedPasswords')"
              type="button"
              class="show-pass-button"
              (click)="showPassword('newPasswordShow')">
              <img
                src="../assets/image/eye.svg"
                alt
                class="show-pass-button__icon">
            </button>
            <svg viewBox="0 0 19 13" xmlns="http://www.w3.org/2000/svg" class="form-field-type__valid" *ngIf="resetViaPasswordForm.get('newPassword').valid && !resetViaPasswordForm.hasError('mismatchedPasswords')">
              <path d="M6.88819 12.9157C6.67486 12.9157 6.47032 12.8317 6.31979 12.6802L0.235486 6.59545C-0.0784952 6.28239 -0.0784952 5.77309 0.235486 5.45911C0.549928 5.14467 1.05922 5.14559 1.37228 5.45911L6.88819 10.9755L17.6286 0.235486C17.9408 -0.0784952 18.4524 -0.0784952 18.7645 0.235486C19.0785 0.549467 19.0785 1.0583 18.7645 1.37228L7.45658 12.6802C7.3056 12.8317 7.10151 12.9157 6.88819 12.9157Z"/>
            </svg>
          </div>
        </div>
        <div
          class="error-box"
          *ngIf="(resetViaPasswordForm.get('newPassword').touched || resetViaPasswordForm.get('newPassword').dirty) && resetViaPasswordForm.get('newPassword').invalid && validationError.newPassword">
          <p
            class="error-box__text"
            *ngIf="resetViaPasswordForm.get('newPassword').hasError('required')">{{ 'local_error.FIELD_REQUIRED' | translate }}</p>
          <p
            class="error-box__text"
            *ngIf="resetViaPasswordForm.value.newPassword && resetViaPasswordForm.get('newPassword').hasError('minlength')">{{ 'local_error.LENGTH_PASS' | translate }}</p>
        </div>
      </div>
      <div class="form-item">
        <p class="form-item__label">Wiederholung neues Passwort</p>
        <div class="form-field">
          <input
            formControlName="confirmPassword"
            [type]="newPasswordShow ? 'password' : 'text'"
            (blur)="triggerValidation('confirmPassword')"
            placeholder="Wiederholung neues Passwort"
            class="form-field__input">
          <div class="form-field-type">
            <p
              class="form-field-type__text"
              *ngIf="!resetViaPasswordForm.get('confirmPassword').value">abc</p>
            <button
              *ngIf="resetViaPasswordForm.get('confirmPassword').value && resetViaPasswordForm.hasError('mismatchedPasswords')"
              type="button"
              class="show-pass-button"
              (click)="showPassword('newPasswordShow')">
              <img
                src="../assets/image/eye.svg"
                alt
                class="show-pass-button__icon">
            </button>
            <svg viewBox="0 0 19 13" xmlns="http://www.w3.org/2000/svg" class="form-field-type__valid" *ngIf="resetViaPasswordForm.get('confirmPassword').valid && !resetViaPasswordForm.hasError('mismatchedPasswords')">
              <path d="M6.88819 12.9157C6.67486 12.9157 6.47032 12.8317 6.31979 12.6802L0.235486 6.59545C-0.0784952 6.28239 -0.0784952 5.77309 0.235486 5.45911C0.549928 5.14467 1.05922 5.14559 1.37228 5.45911L6.88819 10.9755L17.6286 0.235486C17.9408 -0.0784952 18.4524 -0.0784952 18.7645 0.235486C19.0785 0.549467 19.0785 1.0583 18.7645 1.37228L7.45658 12.6802C7.3056 12.8317 7.10151 12.9157 6.88819 12.9157Z"/>
            </svg>
          </div>
        </div>
        <div
          class="error-box"
          *ngIf="(resetViaPasswordForm.get('confirmPassword').touched || resetViaPasswordForm.get('confirmPassword').dirty) && (resetViaPasswordForm.get('confirmPassword').invalid || resetViaPasswordForm.hasError('mismatchedPasswords')) && validationError.confirmPassword">
          <p
            class="error-box__text"
            *ngIf="resetViaPasswordForm.get('confirmPassword').hasError('required')">{{ 'local_error.FIELD_REQUIRED' | translate }}</p>
          <p
            class="error-box__text"
            *ngIf="resetViaPasswordForm.value.confirmPassword && resetViaPasswordForm.get('confirmPassword').hasError('minlength')">{{ 'local_error.LENGTH_PASS' | translate }}</p>
          <p
            class="error-box__text center"
            *ngIf="resetViaPasswordForm.get('newPassword').valid && resetViaPasswordForm.get('confirmPassword').valid && resetViaPasswordForm.hasError('mismatchedPasswords')">
          Dein altes und Dein neues Passwort sind nicht identisch
        </p>
        </div>
      </div>
      <button
        type="submit"
        [disabled]="!resetViaPasswordForm.valid || credentialsNotValid"
        class="submit-button">
        Speichern
      </button>
    </form>
    <div
      class="successful-change"
      *ngIf="resetPasswordSuccessful">
      <img
        src="../assets/image/password-reset/suc.png"
        alt
        class="successful-change__image">
      <p class="successful-change__label">YEAH!</p>
      <p class="successful-change__text">Dein Passwort wurde erfolgreich geändert</p>
    </div>
  </div>
  <div
    class="user-no-account"
    *ngIf="!authService.getAuthData()">
    <h2
      class="user-no-account__title"
      *ngIf="!resetPasswordSuccessful">Bitte gibt Deine Emails Adresse ein</h2>
    <h2
      class="user-no-account__title"
      *ngIf="resetPasswordSuccessful">Du hast Post</h2>
    <form
      *ngIf="resetViaEmailForm && !resetPasswordSuccessful"
      [formGroup]="resetViaEmailForm"
      (ngSubmit)="resetViaEmailSubmit()">
      <div class="form-item">
        <p class="form-item__label">Email</p>
        <div class="form-field">
          <input
            formControlName="email"
            placeholder="Emailadresse"
            type="email"
            class="form-field__input">
          <div class="form-field-type">
            <p class="form-field-type__text">abc</p>
          </div>
        </div>
        <div
          class="error-box"
          *ngIf="(resetViaEmailForm.get('email').touched || resetViaEmailForm.get('email').dirty) && resetViaEmailForm.get('email').invalid">
          <p
            class="error-box__text"
            *ngIf="resetViaEmailForm.get('email').hasError('required')">{{ 'local_error.FIELD_REQUIRED' | translate }}</p>
          <p
            class="error-box__text"
            *ngIf="resetViaEmailForm.get('email').hasError('invalidEmailAddress') && !resetViaEmailForm.get('email').hasError('required')">{{ 'local_error.INVALID_EMAIL' | translate }}</p>
        </div>
      </div>
      <p class="info-reset">
        Im Anschluss senden wir Dir einen Email mit einem Link. Click auf diesen Link um Dein Passwort zurückzusetzen und eine neues einzugeben
      </p>
      <button
        type="submit"
        [disabled]="!resetViaEmailForm.valid"
        class="submit-button">
        Absenden
      </button>
    </form>
    <div
      *ngIf="resetPasswordSuccessful"
      class="successful-email">
      <div class="successful-email__icon">
        <svg viewBox="0 0 41 32" xmlns="http://www.w3.org/2000/svg">
          <path d="M38.9375 19.0215C39.8005 19.0215 40.5 18.3058 40.5 17.423V6.95305C40.5 3.42748 37.6962 0.559189 34.25 0.559189H6.75C3.30375 0.559189 0.5 3.42748 0.5 6.95305V25.4153C0.5 28.9409 3.30375 31.8092 6.75 31.8092H34.25C37.6962 31.8092 40.5 28.9409 40.5 25.4153C40.5 24.5325 39.8005 23.8169 38.9375 23.8169C38.0745 23.8169 37.375 24.5325 37.375 25.4153C37.375 27.1781 35.9731 28.6123 34.25 28.6123H6.75C5.02688 28.6123 3.625 27.1781 3.625 25.4153V7.29177L17.1996 15.9271C18.2175 16.5745 19.3587 16.8983 20.5 16.8983C21.6413 16.8983 22.7825 16.5745 23.8004 15.9271L37.375 7.29177V17.423C37.375 18.3058 38.0745 19.0215 38.9375 19.0215ZM22.1502 13.2122C21.1323 13.8596 19.8677 13.8597 18.8498 13.2122L4.92883 4.3565C5.44195 3.97879 6.07102 3.75612 6.75 3.75612H34.25C34.929 3.75612 35.558 3.97887 36.0712 4.35658L22.1502 13.2122Z" fill="#434784"/>
        </svg>
      </div>
      <p class="successful-email__text">
        Bitte kontrolliere <br>
        Dein Emails Postfach
      </p>
    </div>
  </div>
</section>
