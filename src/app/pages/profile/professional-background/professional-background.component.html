<section class="professional-background">
  <div class="background">
    <img
      src="../assets/image/background-circle-01.png"
      class="background__circle background__circle_01">
    <img
      src="../assets/image/background-circle-02.png"
      class="background__circle background__circle_02">
  </div>
  <app-category-nav-header [categoryPictureStatus]="accordionsStatus" [navSettings]="navSettings"></app-category-nav-header>
  <div class="subcategory">
    <div class="container">
      <form
        class="form"
        [formGroup]="form"
        *ngIf="form">
        <div
          class="subcategory-item"
          formGroupName="workExperience">
          <mat-expansion-panel
            class="accordion"
            (opened)="accordionChange('open')"
            (closed)="accordionChange('close')"
            #accordion01="matExpansionPanel">
            <mat-expansion-panel-header>
              <div class="subcategory-header">
                <div class="subcategory-info">
                  <img
                    src="../assets/image/profile/professional-background/subcategory-01.svg"
                    class="subcategory-info__icon">
                  <p class="subcategory-info__label">Anstellungsverhältnisse</p>
                </div>
                <img
                  src="../assets/image/profile/accordion-arrow.svg"
                  [ngClass]="{ 'accordion-active' : accordion01.expanded }"
                  class="subcategory-header__arrow">
              </div>
            </mat-expansion-panel-header>
            <ng-container formGroupName="employmentConditions">
              <div class="not-relevant">
                <div class="not-relevant__item">
                  <label class="checkbox-container">
                    Für mich nicht relevant
                    <input
                      type="checkbox"
                      class="not-relevant__checkbox"
                      (change)="notRelevant('workExperience', 'employmentConditionsArray', 'employmentConditions')"
                      formControlName="isNotRelevant">
                    <span class="checkmark"></span>
                  </label>
                </div>
              </div>
              <div
                class="relevant-change subcategory-content"
                formArrayName="items">
                <div
                  class="flex-grid"
                  *ngFor="let item of employmentConditionsArray.controls; let i = index"
                  [formGroupName]="i">
                  <div class="remove-fields">
                    <button
                      type="button"
                      class="remove-fields__button"
                      (click)="deleteFormGroup(employmentConditionsArray, i, 'employmentConditions')">
                      <svg viewBox="0 0 10 10" xmlns="http://www.w3.org/2000/svg" class="remove-fields__icon">
                        <path d="M0.050293 0.050293L9.94979 9.94979M9.94979 0.050293L0.0502933 9.94979" stroke-width="2"
                              stroke-linecap="round"/>
                      </svg>
                    </button>
                  </div>
                  <div
                    class="field"
                    [ngClass]="{notRelevant : this.form.get('workExperience').get('employmentConditions').get('isNotRelevant').value}">
                    <p class="field__label">Arbeitgeber</p>
                    <div class="field-wrapper">
                      <input
                        type="text"
                        placeholder="Arbeitgeber"
                        class="field-wrapper__input"
                        formControlName="company"
                        (change)="submit('Arbeitgeber')">
                      <div class="field-wrapper__type">abc</div>
                      <div
                        class="field-wrapper__status"
                        [ngClass]="{invalid : !this.form.get('workExperience').get('employmentConditions').get('items').controls[i].get('company').value}"></div>
                    </div>
                  </div>
                  <div
                    class="field field_select field_select-search single"
                    [ngClass]="{notRelevant : this.form.get('workExperience').get('employmentConditions').get('isNotRelevant').value}">
                    <p class="field__label">Land</p>
                    <div class="field-wrapper">
                      <ng-select
                        [searchable]="true"
                        [items]="$countriesList | async"
                        [clearable]="false"
                        [placeholder]="'Land'"
                        (search)="getCountryList($event.term)"
                        (change)="submit('Land')"
                        class="custom-select"
                        formControlName="country">
                      </ng-select>
                      <div class="field-wrapper__type">abc</div>
                      <div
                        class="field-wrapper__status"
                        [ngClass]="{invalid : !this.form.get('workExperience').get('employmentConditions').get('items').controls[i].get('country').value}"></div>
                    </div>
                  </div>
                  <div
                    class="field"
                    [ngClass]="{notRelevant : this.form.get('workExperience').get('employmentConditions').get('isNotRelevant').value}">
                    <p class="field__label">Arbeitsort</p>
                    <div class="field-wrapper">
                      <input
                        type="text"
                        placeholder="Arbeitsort"
                        class="field-wrapper__input"
                        formControlName="workPlace"
                        (change)="submit('Arbeitsort')">
                      <div class="field-wrapper__type">abc</div>
                      <div
                        class="field-wrapper__status"
                        [ngClass]="{invalid : !this.form.get('workExperience').get('employmentConditions').get('items').controls[i].get('workPlace').value}"></div>
                    </div>
                  </div>
                  <div
                    class="field"
                    [ngClass]="{notRelevant : this.form.get('workExperience').get('employmentConditions').get('isNotRelevant').value}">
                    <p class="field__label">Geschäftsbereich</p>
                    <div class="field-wrapper">
                      <input
                        type="text"
                        placeholder="Geschäftsbereich"
                        class="field-wrapper__input"
                        formControlName="industryBranch"
                        (change)="submit('Geschäftsbereich')">
                      <div class="field-wrapper__type">abc</div>
                      <div
                        class="field-wrapper__status"
                        [ngClass]="{invalid : !this.form.get('workExperience').get('employmentConditions').get('items').controls[i].get('industryBranch').value}"></div>
                    </div>
                  </div>
                  <div
                    class="field field_select field_select-search"
                    [ngClass]="{notRelevant : this.form.get('workExperience').get('employmentConditions').get('isNotRelevant').value}">
                    <p class="field__label">Branche</p>
                    <div class="field-wrapper">
                      <ng-select
                        #ba1
                        [items]="businessArea$ | async"
                        [multiple]="true"
                        [searchable]="true"
                        [clearable]="false"
                        [hideSelected]="true"
                        placeholder="Branche"
                        class="custom-select"
                        (search)="getBusinessArea($event)"
                        (change)="formArrayPush($event, 'employmentConditionsArray', 'businessArea', i)"
                        [formControl]="employmentBusinessAreaControl">
                      </ng-select>
                      <div class="field-wrapper__type">abc</div>
                      <div
                        [ngClass]="{invalid : this.form.get('workExperience').get('employmentConditions').get('items').controls[i].get('businessArea').value.length === 0}"
                        class="field-wrapper__status"></div>
                    </div>
                    <div class="tags-wrapper">
                      <div
                        formArrayName="businessArea"
                        *ngFor="let item of form.get('workExperience').get('employmentConditions').get('items').controls[i].get('businessArea').controls; let indexArr = index;"
                        class="tags-wrapper__item">
                        <p class="tags-wrapper__label">{{item.value}}</p>
                        <button
                          type="button"
                          class="tags-wrapper__remove"
                          (click)="deleteTags(i, indexArr,'employmentConditionsArray', 'businessArea', 'Branche')">
                          <img src="../assets/image/close.svg">
                        </button>
                      </div>
                    </div>
                  </div>
                  <div
                    class="field field_select"
                    [ngClass]="{notRelevant : this.form.get('workExperience').get('employmentConditions').get('isNotRelevant').value}">
                    <p class="field__label">Art der Anstellung</p>
                    <div class="field-wrapper">
                      <ng-select
                        [searchable]="false"
                        [clearable]="false"
                        [hideSelected]="true"
                        placeholder="Art der Anstellung"
                        class="custom-select"
                        formControlName="employmentType"
                        (change)="submit('Art der Anstellung')">
                        <ng-container *ngIf="dropdownOptions">
                          <ng-option
                            *ngFor="let option of dropdownOptions.employment_type"
                            [value]="option">
                            {{option}}
                          </ng-option>
                        </ng-container>
                      </ng-select>
                      <div
                        class="field-wrapper__status"
                        [ngClass]="{invalid : !this.form.get('workExperience').get('employmentConditions').get('items').controls[i].get('employmentType').value}"></div>
                    </div>
                  </div>
                  <div class="field-group">
                    <div
                      class="field field_select"
                      [ngClass]="{notRelevant : this.form.get('workExperience').get('employmentConditions').get('isNotRelevant').value}">
                      <p class="field__label">Karrierelevel</p>
                      <div class="field-wrapper">
                        <ng-select
                          [searchable]="false"
                          [clearable]="false"
                          [hideSelected]="true"
                          placeholder="Karrierelevel"
                          class="custom-select"
                          formControlName="careerLevel"
                          (change)="submit('Karrierelevel')">
                          <ng-container *ngIf="dropdownOptions">
                            <ng-option
                              *ngFor="let option of dropdownOptions.career_level"
                              [value]="option">
                              {{option}}
                            </ng-option>
                          </ng-container>
                        </ng-select>
                        <div
                          class="field-wrapper__status"
                          [ngClass]="{invalid : !this.form.get('workExperience').get('employmentConditions').get('items').controls[i].get('careerLevel').value}"></div>
                      </div>
                    </div>
                    <div
                      class="field"
                      [ngClass]="{notRelevant : this.form.get('workExperience').get('employmentConditions').get('isNotRelevant').value}">
                      <p class="field__label">Job Bezeichnung</p>
                      <div class="field-wrapper">
                        <input
                          type="text"
                          placeholder="Job Bezeichnung"
                          class="field-wrapper__input"
                          formControlName="jobTitle"
                          (change)="submit('Job Bezeichnung')">
                        <div class="field-wrapper__type">abc</div>
                        <div
                          class="field-wrapper__status"
                          [ngClass]="{invalid : !this.form.get('workExperience').get('employmentConditions').get('items').controls[i].get('jobTitle').value}"></div>
                      </div>
                    </div>
                  </div>
                  <div
                    class="field field_textarea"
                    [ngClass]="{notRelevant : this.form.get('workExperience').get('employmentConditions').get('isNotRelevant').value}">
                    <p class="field__label">Beschreibung</p>
                    <div class="field-wrapper textarea">
                      <textarea
                        placeholder="Beschreibung"
                        class="field-wrapper__input"
                        rows="8"
                        formControlName="jobDescription"
                        (change)="submit('Beschreibung')"></textarea>
                      <div class="field-wrapper__type">abc</div>
                      <div
                        class="field-wrapper__status"
                        [ngClass]="{invalid : !this.form.get('workExperience').get('employmentConditions').get('items').controls[i].get('jobDescription').value}"></div>
                    </div>
                  </div>
                  <div class="field field-group">
                    <div class="datepicker-group">
                      <div
                        class="field field_datapicker"
                        [ngClass]="{notRelevant : this.form.get('workExperience').get('employmentConditions').get('isNotRelevant').value}">
                        <p class="field__label">Von</p>
                        <div
                          class="field-wrapper"
                          [owlDateTimeTrigger]="dt1">
                          <input
                            [owlDateTime]="dt1"
                            [max]="previousDate"
                            class="field-wrapper__input"
                            formControlName="dateStart"
                            placeholder="DD/MM/YYYY"
                            (dateTimeChange)="submit('Von')">
                          <owl-date-time
                            #dt1
                            pickerMode="dialog"
                            pickerType="calendar"
                            panelClass="calendar"></owl-date-time>
                          <div class="field-wrapper__type">
                            <img src="../assets/image/calendar.svg">
                          </div>
                          <div
                            class="field-wrapper__status"
                            [ngClass]="{invalid : !this.form.get('workExperience').get('employmentConditions').get('items').controls[i].get('dateStart').value}"></div>
                        </div>
                      </div>
                      <div
                        class="field field_datapicker"
                        [ngClass]="{notRelevant : this.form.get('workExperience').get('employmentConditions').get('isNotRelevant').value}">
                        <p class="field__label">Bis</p>
                        <div
                          class="field-wrapper"
                          [owlDateTimeTrigger]="dt2">
                          <input
                            [owlDateTime]="dt2"
                            [max]="currentDate"
                            class="field-wrapper__input"
                            formControlName="dateEnd"
                            placeholder="DD/MM/YYYY"
                            (dateTimeChange)="submit('Bis')">
                          <owl-date-time
                            #dt2
                            pickerMode="dialog"
                            pickerType="calendar"
                            panelClass="calendar"></owl-date-time>
                          <div class="field-wrapper__type">
                            <img src="../assets/image/calendar.svg">
                          </div>
                          <div
                            class="field-wrapper__status"
                            [ngClass]="{invalid : !this.form.get('workExperience').get('employmentConditions').get('items').controls[i].get('dateEnd').value}"></div>
                        </div>
                      </div>
                      <div
                        class="datapicker-checkbox"
                        [ngClass]="{notRelevant : this.form.get('workExperience').get('employmentConditions').get('isNotRelevant').value}">
                        <label class="checkbox-container">
                          bis heute
                          <input
                            type="checkbox"
                            class="not-relevant__checkbox"
                            (change)="setTodayDate(this.form.get('workExperience').get('employmentConditions').get('items').controls[i])"
                            formControlName="tilToday">
                          <span class="checkmark"></span>
                        </label>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="add-fields">
                  <button
                    type="button"
                    class="add-fields__button"
                    (click)="setFormGroup('employmentConditions')">
                    <img src="../assets/image/plus.svg">
                  </button>
                </div>
              </div>
            </ng-container>
          </mat-expansion-panel>
          <div
            class="subcategory-preview"
            *ngIf="!accordion01.expanded && !form.get('workExperience').get('employmentConditions').get('isNotRelevant').value">
            <div
              class="subcategory-preview-item"
              *ngFor="let item of form.get('workExperience').get('employmentConditions').get('items').controls; let i = index">
              <ng-container *ngIf="item.valid; else notValid">
                <div class="subcategory-preview-info">
                  <p class="subcategory-preview-info__number">
                    <span class="subcategory-preview-info__text">{{ i + 1 }}</span>
                  </p>
                  <div class="subcategory-preview-info__details">
                    <p class="subcategory-preview-info__species">{{ item.get('company').value }}</p>
                    <div class="subcategory-preview-info__circle"></div>
                    <p class="subcategory-preview-info__date">{{ item.get('dateStart').value | date: 'dd/yyyy' }} - {{ item.get('dateEnd').value | date: 'dd/yyyy' }}</p>
                    <div class="subcategory-preview-info__circle"></div>
                    <p class="subcategory-preview-info__scope">{{ item.get('employmentType').value }}</p>
                  </div>
                </div>
                <button
                  type="button"
                  class="subcategory-preview-item__remove"
                  (click)="deleteFormGroup(employmentConditionsArray, i)">
                  <img src="../assets/image/close.svg">
                </button>
              </ng-container>
              <ng-template #notValid>
                <div class="subcategory-preview-info">
                  <p class="subcategory-preview-info__number">
                  <span class="subcategory-preview-info__text">{{ i + 1 }}</span>
                </p>
                  <div class="subcategory-preview-info__details">
                    <p class="subcategory-preview-info__invalid">Unvollständige Angaben</p>
                  </div>
                </div>
              </ng-template>
            </div>
          </div>
        </div>
        <div
          class="subcategory-item"
          formGroupName="workExperience">
          <mat-expansion-panel
            class="accordion"
            (opened)="accordionChange('open')"
            (closed)="accordionChange('close')"
            #accordion02="matExpansionPanel">
            <mat-expansion-panel-header>
              <div class="subcategory-header">
                <div class="subcategory-info">
                  <img
                    src="../assets/image/profile/professional-background/subcategory-02.svg"
                    class="subcategory-info__icon">
                  <p class="subcategory-info__label">Selbstständigkeit</p>
                </div>
                <img
                  src="../assets/image/profile/accordion-arrow.svg"
                  [ngClass]="{ 'accordion-active' : accordion02.expanded }"
                  class="subcategory-header__arrow">
              </div>
            </mat-expansion-panel-header>
            <ng-container formGroupName="independentExperience">
              <div class="not-relevant">
                <div class="not-relevant__item">
                  <label class="checkbox-container">
                    Für mich nicht relevant
                    <input
                      type="checkbox"
                      class="not-relevant__checkbox"
                      (change)="notRelevant('workExperience', 'independentExperienceArray', 'independentExperience')"
                      formControlName="isNotRelevant">
                    <span class="checkmark"></span>
                  </label>
                </div>
              </div>
              <div
                class="relevant-change subcategory-content"
                formArrayName="items">
                <div
                  class="flex-grid"
                  *ngFor="let item of independentExperienceArray.controls; let i = index"
                  [formGroupName]="i">
                  <div class="remove-fields">
                    <button
                      type="button"
                      class="remove-fields__button"
                      (click)="deleteFormGroup(independentExperienceArray, i, 'independentExperience')">
                      <svg viewBox="0 0 10 10" xmlns="http://www.w3.org/2000/svg" class="remove-fields__icon">
                        <path d="M0.050293 0.050293L9.94979 9.94979M9.94979 0.050293L0.0502933 9.94979" stroke-width="2"
                              stroke-linecap="round"/>
                      </svg>
                    </button>
                  </div>
                  <div
                    class="field"
                    [ngClass]="{notRelevant : this.form.get('workExperience').get('independentExperience').get('isNotRelevant').value}">
                    <p class="field__label">Bezeichnung</p>
                    <div class="field-wrapper">
                      <input
                        type="text"
                        placeholder="Bezeichnung"
                        class="field-wrapper__input"
                        formControlName="jobTitle"
                        (change)="submit('Bezeichnung')">
                      <div class="field-wrapper__type">abc</div>
                      <div
                        class="field-wrapper__status"
                        [ngClass]="{invalid : !this.form.get('workExperience').get('independentExperience').get('items').controls[i].get('jobTitle').value}"></div>
                    </div>
                  </div>
                  <div
                    class="field"
                    [ngClass]="{notRelevant : this.form.get('workExperience').get('independentExperience').get('isNotRelevant').value}">
                    <p class="field__label">Name der Firma</p>
                    <div class="field-wrapper">
                      <input
                        type="text"
                        placeholder="Name der Firma"
                        class="field-wrapper__input"
                        formControlName="companyName"
                        (change)="submit('Name der Firma')">
                      <div class="field-wrapper__type">abc</div>
                      <div
                        class="field-wrapper__status"
                        [ngClass]="{invalid : !this.form.get('workExperience').get('independentExperience').get('items').controls[i].get('companyName').value}"></div>
                    </div>
                  </div>
                  <div
                    class="field field_checkbox"
                    [ngClass]="{notRelevant : this.form.get('workExperience').get('independentExperience').get('isNotRelevant').value}">
                    <label class="checkbox-container">
                      Freiberufler
                      <input
                        type="checkbox"
                        class="not-relevant__checkbox"
                        (change)="submit('Freiberufler')"
                        formControlName="isFreelancer">
                      <span class="checkmark"></span>
                    </label>
                  </div>
                  <div
                    class="field field_select field_select-search"
                    [ngClass]="{notRelevant : this.form.get('workExperience').get('independentExperience').get('isNotRelevant').value}">
                    <p class="field__label">Branche</p>
                    <div class="field-wrapper">
                      <ng-select
                        #independentBusinessArea
                        [items]="businessArea$ | async"
                        [multiple]="true"
                        [searchable]="true"
                        [clearable]="false"
                        [hideSelected]="true"
                        placeholder="Branche"
                        class="custom-select"
                        (search)="getBusinessArea($event)"
                        [formControl]="independentBusinessAreaControl"
                        (change)="formArrayPush($event, 'independentExperienceArray', 'businessArea', i)">
                      </ng-select>
                      <div
                        [ngClass]="{invalid : form.get('workExperience').get('independentExperience').get('items').controls[i].get('businessArea').value.length === 0}"
                        class="field-wrapper__status"></div>
                    </div>
                    <div class="tags-wrapper">
                      <div
                        formArrayName="businessArea"
                        *ngFor="let item of form.get('workExperience').get('independentExperience').get('items').controls[i].get('businessArea').controls; let indexArr = index;"
                        class="tags-wrapper__item">
                        <p class="tags-wrapper__label">{{item.value}}</p>
                        <button
                          type="button"
                          class="tags-wrapper__remove"
                          (click)="deleteTags(i, indexArr,'independentExperienceArray','businessArea', 'Branche')">
                          <img src="../assets/image/close.svg">
                        </button>
                      </div>
                    </div>
                  </div>
                  <div
                    class="field field_select field_select-search single"
                    [ngClass]="{notRelevant : this.form.get('workExperience').get('independentExperience').get('isNotRelevant').value}">
                    <p class="field__label">Land</p>
                    <div class="field-wrapper">
                      <ng-select
                        [searchable]="true"
                        [items]="$countriesList | async"
                        [clearable]="false"
                        [placeholder]="'Land'"
                        (search)="getCountryList($event.term)"
                        (change)="submit('Land')"
                        class="custom-select"
                        formControlName="country">
                      </ng-select>
                      <div class="field-wrapper__type">abc</div>
                      <div
                        class="field-wrapper__status"
                        [ngClass]="{invalid : !this.form.get('workExperience').get('independentExperience').get('items').controls[i].get('country').value}"></div>
                    </div>
                  </div>
                  <div class="field field_group">
                    <div
                      class="field field_select field_select-search single"
                      [ngClass]="{'notRelevant' : !this.form.get('workExperience').get('independentExperience').get('items').controls[i].get('country').value || this.form.get('workExperience').get('independentExperience').get('isNotRelevant').value}">
                      <p class="field__label">Ort</p>
                      <div class="field-wrapper">
                        <ng-select
                          [searchable]="true"
                          [items]="$citiesList | async"
                          [clearable]="false"
                          placeholder="Ort"
                          (search)="getCityList($event.term)"
                          (change)="submit('Ort')"
                          class="custom-select"
                          formControlName="workPlace">
                        </ng-select>
                        <div class="field-wrapper__type">abc</div>
                        <div
                          class="field-wrapper__status"
                          [ngClass]="{invalid : !this.form.get('workExperience').get('independentExperience').get('items').controls[i].get('country').value}">
                        </div>
                      </div>
                    </div>
                    <div class="datepicker-group">
                      <div
                        class="field field_datapicker"
                        [ngClass]="{notRelevant : this.form.get('workExperience').get('independentExperience').get('isNotRelevant').value}">
                        <p class="field__label">Von</p>
                        <div
                          class="field-wrapper"
                          [owlDateTimeTrigger]="dt1">
                          <input
                            [owlDateTime]="dt1"
                            [max]="previousDate"
                            (dateTimeChange)="submit('Von')"
                            class="field-wrapper__input"
                            formControlName="dateStart"
                            placeholder="DD/MM/YYYY">
                          <owl-date-time
                            #dt1
                            pickerMode="dialog"
                            pickerType="calendar"
                            panelClass="calendar"></owl-date-time>
                          <div class="field-wrapper__type">
                            <img src="../assets/image/calendar.svg">
                          </div>
                          <div
                            [ngClass]="{invalid : !form.get('workExperience').get('independentExperience').get('items').controls[i].get('dateStart').value }"
                            class="field-wrapper__status"></div>
                        </div>
                      </div>
                      <div
                        class="field field_datapicker"
                        [ngClass]="{notRelevant : this.form.get('workExperience').get('independentExperience').get('isNotRelevant').value}">
                        <p class="field__label">Bis</p>
                        <div
                          class="field-wrapper"
                          [owlDateTimeTrigger]="dt2">
                          <input
                            [owlDateTime]="dt2"
                            [max]="currentDate"
                            (dateTimeChange)="submit('Bis')"
                            class="field-wrapper__input"
                            formControlName="dateEnd"
                            placeholder="DD/MM/YYYY">
                          <owl-date-time
                            #dt2
                            pickerMode="dialog"
                            pickerType="calendar"
                            panelClass="calendar"></owl-date-time>
                          <div class="field-wrapper__type">
                            <img src="../assets/image/calendar.svg">
                          </div>
                          <div
                            [ngClass]="{invalid : !form.get('workExperience').get('independentExperience').get('items').controls[i].get('dateEnd').value }"
                            class="field-wrapper__status"></div>
                        </div>
                      </div>
                      <div
                        class="datapicker-checkbox"
                        [ngClass]="{notRelevant : this.form.get('workExperience').get('independentExperience').get('isNotRelevant').value}">
                        <label class="checkbox-container">
                          bis heute
                          <input
                            type="checkbox"
                            class="not-relevant__checkbox"
                            (change)="submit('bis heute')"
                            formControlName="tilToday">
                          <span class="checkmark"></span>
                        </label>
                      </div>
                    </div>
                  </div>
                  <div
                    class="field field_textarea"
                    [ngClass]="{notRelevant : this.form.get('workExperience').get('independentExperience').get('isNotRelevant').value}">
                    <p class="field__label">Beschreibung</p>
                    <div class="field-wrapper textarea">
                      <textarea
                        type="text"
                        placeholder="Beschreibung"
                        class="field-wrapper__input"
                        formControlName="jobDescription"
                        (change)="submit('Beschreibung')"></textarea>
                      <div class="field-wrapper__type">abc</div>
                      <div
                        [ngClass]="{invalid : !this.form.get('workExperience').get('independentExperience').get('items').controls[i].get('jobDescription').value}"
                        class="field-wrapper__status"></div>
                    </div>
                  </div>
                </div>
                <div class="add-fields">
                  <button
                    type="button"
                    class="add-fields__button"
                    (click)="setFormGroup('independentExperience')">
                    <img src="../assets/image/plus.svg">
                  </button>
                </div>
              </div>
            </ng-container>
          </mat-expansion-panel>
          <div
            class="subcategory-preview"
            *ngIf="!accordion02.expanded && !form.get('workExperience').get('independentExperience').get('isNotRelevant').value">
            <div
              class="subcategory-preview-item"
              *ngFor="let item of this.form.get('workExperience').get('independentExperience').get('items').controls; let i = index">
              <ng-container *ngIf="item.valid; else notValid">
                <div class="subcategory-preview-info">
                  <p class="subcategory-preview-info__number">
                    <span class="subcategory-preview-info__text">{{ i + 1 }}</span>
                  </p>
                  <div class="subcategory-preview-info__details">
                    <p class="subcategory-preview-info__species">{{ item.get('companyName').value }}</p>
                    <div class="subcategory-preview-info__circle"></div>
                    <p class="subcategory-preview-info__date">{{ item.get('dateStart').value | date: 'dd/yyyy' }} - {{ item.get('dateEnd').value | date: 'dd/yyyy' }}</p>
                    <div class="subcategory-preview-info__circle"></div>
                    <p class="subcategory-preview-info__scope">{{ item.get('jobTitle').value }}</p>
                  </div>
                </div>
                <button
                  type="button"
                  class="subcategory-preview-item__remove"
                  (click)="deleteFormGroup(independentExperienceArray, i)">
                  <img src="../assets/image/close.svg">
                </button>
              </ng-container>
              <ng-template #notValid>
                <div class="subcategory-preview-info">
                  <p class="subcategory-preview-info__number">
                  <span class="subcategory-preview-info__text">{{ i + 1 }}</span>
                </p>
                  <div class="subcategory-preview-info__details">
                    <p class="subcategory-preview-info__invalid">Unvollständige Angaben</p>
                  </div>
                </div>
              </ng-template>
            </div>
          </div>
        </div>
        <div
          class="subcategory-item"
          formGroupName="workExperience">
          <mat-expansion-panel
            class="accordion"
            (opened)="accordionChange('open')"
            (closed)="accordionChange('close')"
            #accordion03="matExpansionPanel">
            <mat-expansion-panel-header>
              <div class="subcategory-header">
                <div class="subcategory-info">
                  <img
                    src="../assets/image/profile/professional-background/subcategory-03.svg"
                    class="subcategory-info__icon">
                  <p class="subcategory-info__label">Sonstige Stationen</p>
                </div>
                <img
                  src="../assets/image/profile/accordion-arrow.svg"
                  [ngClass]="{ 'accordion-active' : accordion02.expanded }"
                  class="subcategory-header__arrow">
              </div>
            </mat-expansion-panel-header>
            <ng-container formGroupName="otherExperience">
              <div class="not-relevant">
                <div class="not-relevant__item">
                  <label class="checkbox-container">
                    Für mich nicht relevant
                    <input
                      type="checkbox"
                      class="not-relevant__checkbox"
                      (change)="notRelevant('workExperience', 'otherExperienceArray', 'otherExperience')"
                      formControlName="isNotRelevant">
                    <span class="checkmark"></span>
                  </label>
                </div>
              </div>
              <div
                class="relevant-change subcategory-content"
                formArrayName="items">
                <div
                  class="flex-grid"
                  *ngFor="let item of otherExperienceArray.controls; let i = index"
                  [formGroupName]="i">
                  <div class="remove-fields">
                    <button
                      type="button"
                      class="remove-fields__button"
                      (click)="deleteFormGroup(otherExperienceArray, i, 'otherExperience')">
                      <svg viewBox="0 0 10 10" xmlns="http://www.w3.org/2000/svg" class="remove-fields__icon">
                        <path d="M0.050293 0.050293L9.94979 9.94979M9.94979 0.050293L0.0502933 9.94979" stroke-width="2"
                              stroke-linecap="round"/>
                      </svg>
                    </button>
                  </div>
                  <div
                    class="field"
                    [ngClass]="{notRelevant : this.form.get('workExperience').get('otherExperience').get('isNotRelevant').value}">
                    <p class="field__label">Bezeichnung</p>
                    <div class="field-wrapper">
                      <input
                        type="text"
                        placeholder="Bezeichnung"
                        class="field-wrapper__input"
                        formControlName="jobTitle"
                        (change)="submit('Bezeichnung')">
                      <div class="field-wrapper__type">abc</div>
                      <div
                        class="field-wrapper__status"
                        [ngClass]="{invalid : !this.form.get('workExperience').get('otherExperience').get('items').controls[i].get('jobTitle').value}"></div>
                    </div>
                  </div>
                  <div
                    class="field field_select field_select-search single"
                    [ngClass]="{notRelevant : this.form.get('workExperience').get('otherExperience').get('isNotRelevant').value}">
                    <p class="field__label">Land</p>
                    <div class="field-wrapper">
                      <ng-select
                        [searchable]="true"
                        [items]="$countriesList | async"
                        [clearable]="false"
                        [placeholder]="'Land'"
                        (search)="getCountryList($event.term)"
                        (change)="submit('Land')"
                        class="custom-select"
                        formControlName="country">
                      </ng-select>
                      <div class="field-wrapper__type">abc</div>
                      <div
                        class="field-wrapper__status"
                        [ngClass]="{invalid : !this.form.get('workExperience').get('otherExperience').get('items').controls[i].get('country').value}"></div>
                    </div>
                  </div>

                  <div class="field field_group">
                    <div
                      class="field field_select field_select-search single"
                      [ngClass]="{notRelevant : !this.form.get('workExperience').get('otherExperience').get('items').controls[i].get('country').value || this.form.get('workExperience').get('otherExperience').get('isNotRelevant').value}">
                      <p class="field__label">Ort</p>
                      <div class="field-wrapper">
                        <ng-select
                          [searchable]="true"
                          [items]="$citiesList | async"
                          [clearable]="false"
                          placeholder="Ort"
                          (search)="getCityList($event.term)"
                          (change)="submit('Ort')"
                          class="custom-select"
                          formControlName="workPlace">
                        </ng-select>
                        <div class="field-wrapper__type">abc</div>
                        <div
                          class="field-wrapper__status"
                          [ngClass]="{invalid : !this.form.get('workExperience').get('otherExperience').get('items').controls[i].get('country').value}">
                        </div>
                      </div>
                    </div>
                    <div class="datepicker-group">
                      <div
                        class="field field_datapicker"
                        [ngClass]="{notRelevant : this.form.get('workExperience').get('otherExperience').get('isNotRelevant').value}">
                        <p class="field__label">Von</p>
                        <div
                          class="field-wrapper"
                          [owlDateTimeTrigger]="dt1">
                          <input
                            [owlDateTime]="dt1"
                            [max]="previousDate"
                            (dateTimeChange)="submit('Von')"
                            class="field-wrapper__input"
                            formControlName="dateStart"
                            placeholder="DD/MM/YYYY">
                          <owl-date-time
                            #dt1
                            pickerMode="dialog"
                            pickerType="calendar"
                            panelClass="calendar"></owl-date-time>
                          <div class="field-wrapper__type">
                            <img src="../assets/image/calendar.svg">
                          </div>
                          <div
                            [ngClass]="{invalid : !form.get('workExperience').get('otherExperience').get('items').controls[i].get('dateStart').value }"
                            class="field-wrapper__status"></div>
                        </div>
                      </div>
                      <div
                        class="field field_datapicker"
                        [ngClass]="{notRelevant : this.form.get('workExperience').get('otherExperience').get('isNotRelevant').value}">
                        <p class="field__label">Bis</p>
                        <div
                          class="field-wrapper"
                          [owlDateTimeTrigger]="dt2">
                          <input
                            [owlDateTime]="dt2"
                            [max]="currentDate"
                            (dateTimeChange)="submit('Bis')"
                            class="field-wrapper__input"
                            formControlName="dateEnd"
                            placeholder="DD/MM/YYYY">
                          <owl-date-time
                            #dt2
                            pickerMode="dialog"
                            pickerType="calendar"
                            panelClass="calendar"></owl-date-time>
                          <div class="field-wrapper__type">
                            <img src="../assets/image/calendar.svg">
                          </div>
                          <div
                            [ngClass]="{invalid : !form.get('workExperience').get('otherExperience').get('items').controls[i].get('dateEnd').value }"
                            class="field-wrapper__status"></div>
                        </div>
                      </div>
                      <div
                        class="datapicker-checkbox"
                        [ngClass]="{notRelevant : this.form.get('workExperience').get('otherExperience').get('isNotRelevant').value}">
                        <label class="checkbox-container">
                          bis heute
                          <input
                            type="checkbox"
                            class="not-relevant__checkbox"
                            (change)="submit('bis heute')"
                            formControlName="tilToday">
                          <span class="checkmark"></span>
                        </label>
                      </div>
                    </div>
                  </div>

                  <div
                    class="field field_textarea"
                    [ngClass]="{notRelevant : this.form.get('workExperience').get('otherExperience').get('isNotRelevant').value}">
                    <p class="field__label">Beschreibung</p>
                    <div class="field-wrapper textarea">
                      <textarea
                        type="text"
                        placeholder="Beschreibung"
                        class="field-wrapper__input"
                        formControlName="jobDescription"
                        (change)="submit('Beschreibung')"></textarea>
                      <div class="field-wrapper__type">abc</div>
                      <div
                        [ngClass]="{invalid : !this.form.get('workExperience').get('otherExperience').get('items').controls[i].get('jobDescription').value}"
                        class="field-wrapper__status"></div>
                    </div>
                  </div>
                </div>
                <div class="add-fields">
                  <button
                    type="button"
                    class="add-fields__button"
                    (click)="setFormGroup('otherExperience')">
                    <img src="../assets/image/plus.svg">
                  </button>
                </div>
              </div>
            </ng-container>
          </mat-expansion-panel>
          <div
            class="subcategory-preview"
            *ngIf="!accordion03.expanded && !form.get('workExperience').get('otherExperience').get('isNotRelevant').value">
            <div
              class="subcategory-preview-item"
              *ngFor="let item of this.form.get('workExperience').get('otherExperience').get('items').controls; let i = index">
              <ng-container *ngIf="item.valid; else notValid">
                <div class="subcategory-preview-info">
                  <p class="subcategory-preview-info__number">
                    <span class="subcategory-preview-info__text">{{ i + 1 }}</span>
                  </p>
                  <div class="subcategory-preview-info__details">
                    <p class="subcategory-preview-info__species">{{ item.get('jobTitle').value }}</p>
                    <div class="subcategory-preview-info__circle"></div>
                    <p class="subcategory-preview-info__date">{{ item.get('dateStart').value | date: 'dd/yyyy' }} - {{ item.get('dateEnd').value | date: 'dd/yyyy' }}</p>
                    <div class="subcategory-preview-info__circle"></div>
                    <p class="subcategory-preview-info__scope">{{ item.get('workPlace').value }}</p>
                  </div>
                </div>
                <button
                  type="button"
                  class="subcategory-preview-item__remove"
                  (click)="deleteFormGroup(otherExperienceArray, i)">
                  <img src="../assets/image/close.svg">
                </button>
              </ng-container>
              <ng-template #notValid>
                <div class="subcategory-preview-info">
                  <p class="subcategory-preview-info__number">
                  <span class="subcategory-preview-info__text">{{ i + 1 }}</span>
                </p>
                  <div class="subcategory-preview-info__details">
                    <p class="subcategory-preview-info__invalid">Unvollständige Angaben</p>
                  </div>
                </div>
              </ng-template>
            </div>
          </div>
        </div>
      </form>
    </div>
  </div>
</section>
